<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
    <link rel="stylesheet" href="templates/static/css/style.css">
    <script>
        /**
         * @return {string}
         */
        function Syntax(code) {
            var comments = [];	// Тут собираем все каменты
            var strings = [];	// Тут собираем все строки
            var res = [];	// Тут собираем все RegExp
            var all = {'C': comments, 'S': strings, 'R': res};
            var safe = {'<': '<', '>': '>', '&': '&'};

            return code
            // Маскируем HTML
                .replace(/[<>&]/g, function (m) {
                    return safe[m];
                })
                // Убираем каменты
                .replace(/\/\*[\s\S]*\*\//g, function (m) {
                    var l = comments.length;
                    comments.push(m);
                    return '~~~C' + l + '~~~';
                })
                .replace(/([^\\])\/\/[^\n]*\n/g, function (m, f) {
                    var l = comments.length;
                    comments.push(m);
                    return f + '~~~C' + l + '~~~';
                })
                // Убираем regexp
                .replace(/\/(\\\/|[^\/\n])*\/[gim]{0,3}/g, function (m) {
                    var l = res.length;
                    res.push(m);
                    return '~~~R' + l + '~~~';
                })
                // Убираем строки
                .replace(/([^\\])((?:'(?:\\'|[^'])*')|(?:"(?:\\"|[^"])*"))/g, function (m, f, s) {
                    var l = strings.length;
                    strings.push(s);
                    return f + '~~~S' + l + '~~~';
                })
                // Выделяем ключевые слова
                .replace(/(var|function|typeof|new|return|if|for|in|while|break|do|continue|switch|case)([^a-z0-9\$_])/gi,
                    '<span class="kwrd">$1</span>$2')
                // Выделяем скобки
                .replace(/(\{|\}|\]|\[|\|)/gi,
                    '<span class="gly">$1</span>')
                // Выделяем имена функций
                .replace(/([a-z\_\$][a-z0-9_]*)[\s]*\(/gi,
                    '<span class="func">$1</span>(')
                // Возвращаем на место каменты, строки, RegExp
                .replace(/~~~([CSR])(\d+)~~~/g, function (m, t, i) {
                    return '<span class="' + t + '">' + all[t][i] + '</span>';
                })
                // Выставляем переводы строк
                .replace(/\n/g,
                    '<br/>')
                // Табуляцию заменяем неразрывными пробелами
                .replace(/\t/g,
                    '&nbsp;&nbsp;&nbsp;&nbsp;');
        }
    </script>
</head>
<body>
<div class="content">
    <div class="header">
        <div class="header__inner">
            <h2 class="logo">Slix <span>framework</span></h2>
        </div>
        <div class="header__inner">
            <ul class="menu">
                <li><a href="/">Home</a></li>
                <li><a href="https://github.com/M4MIND/Slix" target="_blank">GitHub</a></li>
                <li><a href="https://www.npmjs.com/package/slix-app" target="_blank">NPM</a></li>
            </ul>
        </div>
    </div>
    <div class="content__wrapper">
        <div class="content__container">
            <h2 class="title">Create controllers:</h2>

            <p>In folder controllers create files IndexController.js and PageNotFoundController.js
                then add in files this code:
                <br><br>

            <h4 class="title title--no-border">Index controller</h4>
            <pre class="code">
import {AbstractController, Response} from "slix"

export default class IndexController extends AbstractController {
    mount() {
        this.GET('/', this.index);
    }

    index (request) {
        return new Response("Index controller")
    }
}
            </pre>
            <H4 class="title title--no-border">Page not found controller</H4>
            <pre class="code">
import {AbstractController, Response} from "slix"

export default class PageNotFoundController extends AbstractController {
    mount() {
        this.ALL('*', this.index);
    }

    index = async (request) => {
        return new Response('Error 404', Response.HTTP_NOT_FOUND)
    }
}
            </pre>
            <br>
            <h2 class="title">Rendering templates:</h2>
            <p>
                This framework use Twig template engine Twig<br><br>
                Create file index.twig in folder views and add this code in method controller:
            </p>

            <pre class="code">
index (request) {
    return await this.App.render('index', {
        title: 'Index'
    })
}
            </pre>

            <h2 class="title">Routing:</h2>
            <p>
                In controllers that inherit from AbstractController, there is a mount method that performs controller
                mounting
            </p>
            <pre class="code">
this.GET('/', this.index);
this.POST('/', this.index);
this.PUT('/', this.index);
this.DELETE('/', this.index);
this.HEAD('/', this.index);
this.OPTIONS('/', this.index);
this.CONNECT('/', this.index);
this.TRACE('/', this.index);
this.ALL('/', this.index); 
            </pre>

            <br>

            <h2 class="title">Response Object: </h2>
            <pre class="code">
new Response(content, RESPONSE.HTTP_OK);
new JsonResponse({test: "test"});
new FileResponse(content, typeContent);
new RedirectResponse(url, Response.HTTP_FOUND);
            </pre>
        </div>
    </div>
</div>
</body>
<script>
    for (let code of document.getElementsByClassName('code')) {
        code.innerHTML = Syntax(code.innerHTML);
    }
</script>
</html>